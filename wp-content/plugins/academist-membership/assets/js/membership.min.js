if(function(e,t,a){var o,n=e.getElementsByTagName(t)[0];e.getElementById(a)||((o=e.createElement(t)).id=a,o.src="//connect.facebook.net/en_US/sdk.js",n.parentNode.insertBefore(o,n))}(document,"script","facebook-jssdk"),"undefined"!=typeof eltdfSocialLoginVars)var facebookAppId=eltdfSocialLoginVars.social.facebookAppId;facebookAppId&&(window.fbAsyncInit=function(){FB.init({appId:facebookAppId,cookie:!0,xfbml:!0,version:"v2.5"}),window.FB=FB}),function(i){"use strict";var e={};function t(){var e=i(".eltdf-modal-opener"),a=i(".eltdf-modal-holder");e.length&&a.length&&(e.click(function(e){e.preventDefault();var t=i(this).data("modal");a.fadeOut(300),a.removeClass("opened"),a.each(function(){var e=i(this);"undefined"!==e.data("modal")&&e.data("modal")===t&&(e.fadeIn(300),e.addClass("opened"))})}),a.each(function(){var t=i(this);t.click(function(e){t.hasClass("opened")&&(t.fadeOut(300),t.removeClass("opened"))}),i(window).on("keyup",function(e){t.hasClass("opened")&&27===e.keyCode&&(t.fadeOut(300),t.removeClass("opened"))}),t.find(".eltdf-modal-content").click(function(e){e.stopPropagation()})}))}function a(){i(".eltdf-login-form").on("submit",function(e){e.preventDefault();var t={action:"academist_membership_login_user",security:i(this).find("#eltdf-login-security").val(),login_data:i(this).serialize()};return i.ajax({type:"POST",data:t,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t;s(t=JSON.parse(e)),"success"===t.status&&(window.location=t.redirect)}}),!1})}function o(){i(".eltdf-register-form").on("submit",function(e){e.preventDefault();var t={action:"academist_membership_register_user",security:i(this).find("#eltdf-register-security").val(),register_data:i(this).serialize()};return i.ajax({type:"POST",data:t,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t;s(t=JSON.parse(e)),"success"===t.status&&(window.location=t.redirect)}}),!1})}function n(){var a=i(".eltdf-reset-pass-form");a.on("submit",function(e){e.preventDefault();var t={action:"academist_membership_user_lost_password",user_login:a.find("#user_reset_password_login").val()};i.ajax({type:"POST",data:t,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t=JSON.parse(e);s(t),"success"===t.status&&(window.location=t.redirect)}})})}function s(e){var t=i(".eltdf-membership-response-holder"),a=_.template(i(".eltdf-membership-response-template").html())({messageClass:"success"===e.status?"eltdf-membership-message-succes":"eltdf-membership-message-error",message:e.message});t.html(a)}function l(){i(".eltdf-facebook-login-holder").on("submit",function(e){e.preventDefault(),window.FB.login(function(e){var t;"connected"===(t=e).status?(console.log("Welcome! Fetching information from Facebook..."),FB.api("/me","GET",{fields:"id, name, email, link, picture"},function(e){var t=i(".eltdf-facebook-login-holder [name^=eltdf_nonce_facebook_login]").val();e.nonce=t,e.image=e.picture.data.url;var a={action:"academist_membership_check_facebook_user",response:e};i.ajax({type:"POST",data:a,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t;s(t=JSON.parse(e)),"success"===t.status&&(window.location=t.redirect)}})})):"not_authorized"===t.status?console.log("Please log into this app"):console.log("Please log into Facebook")},{scope:"email, public_profile"})})}function d(){if("undefined"!=typeof eltdfSocialLoginVars)var e=eltdfSocialLoginVars.social.googleClientId;e?gapi.load("auth2",function(){window.auth2=gapi.auth2.init({client_id:e}),i(".eltdf-google-login-holder").on("submit",function(e){e.preventDefault(),window.auth2.signIn(),function(){if(window.auth2.isSignedIn.get()){var e=window.auth2.currentUser.get(),t=e.getBasicProfile(),a=i(".eltdf-google-login-holder [name^=eltdf_nonce_google_login]").val(),o={id:t.getId(),name:t.getName(),email:t.getEmail(),image:t.getImageUrl(),link:"https://plus.google.com/"+t.getId(),nonce:a},n={action:"academist_membership_check_google_user",response:o};i.ajax({type:"POST",data:n,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t;s(t=JSON.parse(e)),"success"===t.status&&(window.location=t.redirect)}})}}()})}):i(".eltdf-google-login-holder").on("submit",function(e){e.preventDefault()})}"undefined"!=typeof eltdf&&(eltdf.modules.socialLogin=e),e.eltdfUserLogin=a,e.eltdfUserRegister=o,e.eltdfUserLostPassword=n,e.eltdfInitWidgetModal=t,e.eltdfInitFacebookLogin=l,e.eltdfInitGooglePlusLogin=d,e.eltdfRenderAjaxResponseMessage=s,i(document).ready(function(){t(),a(),o(),n()}),i(window).load(function(){l(),d(),function(){i(".eltdf-membership-main-wrapper");var e=i(".page-template-user-dashboard .eltdf-content"),t=i(".eltdf-page-footer"),a=0;!eltdf.body.hasClass("eltdf-header-transparent")&&1024<eltdf.windowWidth&&(a=a+eltdfGlobalVars.vars.eltdfMenuAreaHeight+eltdfGlobalVars.vars.eltdfLogoAreaHeight);0<t.length&&(a+=t.outerHeight());if(1024<eltdf.windowWidth){var o=eltdf.windowHeight-a;e.css({"min-height":o+"px"})}}()})}(jQuery),function(i){"use strict";var e={};function t(){a(),i(document.body).on("academist_membership_favorites_trigger",function(){a()})}function a(){i(".eltdf-membership-item-favorites").on("click",function(e){e.preventDefault();var t,a,o,n=i(this);void 0!==n.data("item-id")&&(t=n.data("item-id")),a=n,o={action:"academist_membership_add_item_to_favorites",item_id:t},i.ajax({type:"POST",data:o,url:eltdfGlobalVars.vars.eltdfAjaxUrl,success:function(e){var t=JSON.parse(e);"success"===t.status&&(a.hasClass("eltdf-icon-only")||a.find("span").text(t.data.message),a.find(".eltdf-favorites-icon").removeClass("eltdf-favorite-inactive eltdf-favorite-active").addClass(t.data.icon))}})})}(eltdf.modules.membershipFavorites=e).eltdfOnDocumentReady=t,i(document).ready(t)}(jQuery);